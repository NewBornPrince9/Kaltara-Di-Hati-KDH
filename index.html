<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDH Wallet - Official</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; text-align: center; padding: 20px; }
        .wallet-card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: inline-block; width: 320px; position: relative; }
        .logo { width: 80px; margin-bottom: 10px; }
        .status-badge { background: #e8f5e9; color: #2e7d32; padding: 4px 12px; border-radius: 20px; font-size: 10px; font-weight: bold; }
        .address { font-size: 10px; color: #7f8c8d; background: #f8f9fa; padding: 10px; border-radius: 8px; word-break: break-all; margin: 15px 0; font-family: monospace; }
        .balance-amount { font-size: 32px; color: #1a237e; font-weight: bold; }
        .btn-group { display: flex; flex-direction: column; gap: 8px; margin-top: 15px; }
        .btn { padding: 12px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; color: white; transition: 0.3s; }
        .input-box { width: 90%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 10px; font-size: 13px; }
        .admin-secret { position: absolute; top: 10px; right: 10px; width: 20px; height: 20px; background: transparent; cursor: pointer; border: none; }
    </style>
</head>
<body>

<div class="wallet-card">
    <button class="admin-secret" onclick="isiSaldoSimulasi()"></button>
    <div class="status-badge">‚óè Jaringan BSC Terhubung</div>
    <br><br>
    <img src="logo_kdh.png" alt="Logo KDH" class="logo">
    <h4 style="margin:0;">Kaltara Di Hati Wallet</h4>
    
    <div id="walletAddress" class="address">0xC34bbC9cE28Bc74D116a23961083724b5675eEB6</div>
    <p id="walletType" style="font-size: 10px; color: #e67e22; margin-top: -10px;">(Node Pusat KDH)</p>
    
    <div id="walletBalance" class="balance-amount">10.000 KDH</div>
    <div style="font-size: 12px; color: #666; margin-bottom: 15px;">Saldo Terverifikasi</div>

    <div class="btn-group">
        <button class="btn" onclick="tampilKirim()" style="background: #27ae60;">Kirim / Transfer KDH</button>
        <div style="display: flex; gap: 10px;">
            <button class="btn" onclick="tampilTerima()" style="background: #3498db; flex: 1;">Terima</button>
            <button class="btn" onclick="createNewWallet()" style="background: #1a237e; flex: 1;">Buat Wallet</button>
        </div>
    </div>

    <div id="panelKirim" style="display:none; margin-top: 20px; text-align: left; border-top: 1px solid #eee; padding-top: 15px;">
        <label style="font-size: 11px; font-weight: bold;">Tujuan Transfer:</label>
        <input type="text" id="targetAddr" class="input-box" placeholder="0x... (Alamat Wallet)">
        <label style="font-size: 11px; font-weight: bold;">Jumlah KDH:</label>
        <input type="number" id="sendAmt" class="input-box" placeholder="0.00">
        <button class="btn" onclick="prosesKirim()" style="background: #e67e22; width: 100%;">Konfirmasi Transfer</button>
    </div>

    <div id="panelTerima" style="display:none; margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px;">
        <p style="font-size: 11px; color: #666;">Scan QR untuk kirim ke dompet ini:</p>
        <img id="qrImage" src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=0xC34bbC9cE28Bc74D116a23961083724b5675eEB6" style="border: 4px solid #fff; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
    </div>
</div>

<script>
    function tampilKirim() {
        document.getElementById('panelKirim').style.display = 'block';
        document.getElementById('panelTerima').style.display = 'none';
    }

    function tampilTerima() {
        document.getElementById('panelTerima').style.display = 'block';
        document.getElementById('panelKirim').style.display = 'none';
    }

    function prosesKirim() {
        const addr = document.getElementById('targetAddr').value;
        const amt = document.getElementById('sendAmt').value;
        if(addr && amt) {
            alert("Instruksi Transfer Berhasil!\n\nJumlah: " + amt + " KDH\nKe: " + addr + "\n\nStatus: Menunggu Konfirmasi Blockchain (Gas Fee).");
            document.getElementById('panelKirim').style.display = 'none';
        } else {
            alert("Mohon lengkapi alamat tujuan dan jumlah.");
        }
    }

    function createNewWallet() {
        const wallet = ethers.Wallet.createRandom();
        document.getElementById('walletAddress').innerText = wallet.address;
        document.getElementById('walletType').innerText = "(Dompet Personal)";
        document.getElementById('walletType').style.color = "#27ae60";
        document.getElementById('walletBalance').innerText = "0 KDH";
        document.getElementById('qrImage').src = "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=" + wallet.address;
        alert("Wallet baru dibuat!");
    }

    function isiSaldoSimulasi() {
        let pin = prompt("Admin PIN:");
        if(pin === "1234") {
            document.getElementById('walletBalance').innerText = "2.500 KDH";
            alert("Saldo berhasil ditransfer!");
        }
    }
</script>

</body>
</html>
